{"version":3,"file":"RegisterView-a29eQDAf.js","sources":["../../src/components/auth/RegisterForm.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { ref, reactive } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { ElMessage } from 'element-plus';\nimport { useAuthStore } from '@/stores/auth';\n\nconst authStore = useAuthStore();\nconst router = useRouter();\n\nconst form = reactive({\n  username: '',\n  email: '',\n  password: '',\n  confirmPassword: '',\n  displayName: '',\n});\n\nconst isSubmitting = ref(false);\nconst formRef = ref();\n\nconst validatePass = (_rule: any, value: string, callback: any) => {\n  if (value === '') {\n    callback(new Error('Please enter your password'));\n  } else if (value.length < 6) {\n    callback(new Error('Password must be at least 6 characters'));\n  } else {\n    if (form.confirmPassword !== '') {\n      if (formRef.value) {\n        formRef.value.validateField('confirmPassword');\n      }\n    }\n    callback();\n  }\n};\n\nconst validateConfirmPass = (_rule: any, value: string, callback: any) => {\n  if (value === '') {\n    callback(new Error('Please confirm your password'));\n  } else if (value !== form.password) {\n    callback(new Error('Passwords do not match'));\n  } else {\n    callback();\n  }\n};\n\nconst rules = {\n  username: [\n    { required: true, message: 'Please enter a username', trigger: 'blur' },\n    { min: 3, message: 'Username must be at least 3 characters', trigger: 'blur' },\n  ],\n  email: [\n    { required: true, message: 'Please enter your email', trigger: 'blur' },\n    { type: 'email', message: 'Please enter a valid email address', trigger: 'blur' },\n  ],\n  password: [\n    { validator: validatePass, trigger: 'blur' },\n  ],\n  confirmPassword: [\n    { validator: validateConfirmPass, trigger: 'blur' },\n  ],\n};\n\nasync function handleSubmit() {\n  if (!formRef.value) return;\n  \n  await formRef.value.validate(async (valid: boolean) => {\n    if (!valid) return;\n    \n    isSubmitting.value = true;\n    \n    try {\n      // Remove confirmPassword before sending to API\n      const { confirmPassword, ...registerData } = form;\n      \n      const success = await authStore.register(registerData);\n      \n      if (success) {\n        ElMessage.success('Registration successful!');\n        router.push({ name: 'home' });\n      } else {\n        ElMessage.error(authStore.error || 'Registration failed. Please try again.');\n      }\n    } catch (error) {\n      ElMessage.error('An unexpected error occurred. Please try again.');\n      console.error('Registration error:', error);\n    } finally {\n      isSubmitting.value = false;\n    }\n  });\n}\n</script>\n\n<template>\n  <div class=\"register-form\">\n    <h2 class=\"text-2xl font-bold mb-6\">Create an Account</h2>\n    \n    <el-form\n      ref=\"formRef\"\n      :model=\"form\"\n      :rules=\"rules\"\n      label-position=\"top\"\n      @submit.prevent=\"handleSubmit\"\n    >\n      <el-form-item label=\"Username\" prop=\"username\">\n        <el-input \n          v-model=\"form.username\" \n          placeholder=\"Choose a username\"\n          autocomplete=\"username\"\n        />\n      </el-form-item>\n      \n      <el-form-item label=\"Email\" prop=\"email\">\n        <el-input \n          v-model=\"form.email\" \n          placeholder=\"Enter your email\"\n          type=\"email\"\n          autocomplete=\"email\"\n        />\n      </el-form-item>\n      \n      <el-form-item label=\"Display Name (optional)\">\n        <el-input \n          v-model=\"form.displayName\" \n          placeholder=\"Enter your display name\"\n          autocomplete=\"name\"\n        />\n      </el-form-item>\n      \n      <el-form-item label=\"Password\" prop=\"password\">\n        <el-input \n          v-model=\"form.password\" \n          placeholder=\"Create a password\"\n          type=\"password\"\n          autocomplete=\"new-password\"\n          show-password\n        />\n      </el-form-item>\n      \n      <el-form-item label=\"Confirm Password\" prop=\"confirmPassword\">\n        <el-input \n          v-model=\"form.confirmPassword\" \n          placeholder=\"Confirm your password\"\n          type=\"password\"\n          autocomplete=\"new-password\"\n          show-password\n        />\n      </el-form-item>\n      \n      <el-button \n        type=\"primary\" \n        native-type=\"submit\"\n        :loading=\"isSubmitting\"\n        class=\"w-full\"\n      >\n        Register\n      </el-button>\n      \n      <div class=\"mt-4 text-center\">\n        <p>\n          Already have an account?\n          <router-link \n            to=\"/auth/login\" \n            class=\"text-blue-600 hover:text-blue-800 ml-1\"\n          >\n            Login\n          </router-link>\n        </p>\n      </div>\n    </el-form>\n  </div>\n</template>\n\n<style scoped>\n.register-form {\n  max-width: 400px;\n  margin: 0 auto;\n  padding: 2rem;\n  border-radius: 0.5rem;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  background-color: var(--el-bg-color);\n}\n</style> "],"names":["authStore","useAuthStore","router","useRouter","form","reactive","isSubmitting","ref","formRef","rules","_rule","value","callback","handleSubmit","valid","confirmPassword","registerData","ElMessage","error"],"mappings":"6WAMA,MAAMA,EAAYC,EAAa,EACzBC,EAASC,EAAU,EAEnBC,EAAOC,EAAS,CACpB,SAAU,GACV,MAAO,GACP,SAAU,GACV,gBAAiB,GACjB,YAAa,EAAA,CACd,EAEKC,EAAeC,EAAI,EAAK,EACxBC,EAAUD,EAAI,EA2BdE,EAAQ,CACZ,SAAU,CACR,CAAE,SAAU,GAAM,QAAS,0BAA2B,QAAS,MAAO,EACtE,CAAE,IAAK,EAAG,QAAS,yCAA0C,QAAS,MAAO,CAC/E,EACA,MAAO,CACL,CAAE,SAAU,GAAM,QAAS,0BAA2B,QAAS,MAAO,EACtE,CAAE,KAAM,QAAS,QAAS,qCAAsC,QAAS,MAAO,CAClF,EACA,SAAU,CACR,CAAE,UAnCe,CAACC,EAAYC,EAAeC,IAAkB,CAC7DD,IAAU,GACHC,EAAA,IAAI,MAAM,4BAA4B,CAAC,EACvCD,EAAM,OAAS,EACfC,EAAA,IAAI,MAAM,wCAAwC,CAAC,GAExDR,EAAK,kBAAoB,IACvBI,EAAQ,OACFA,EAAA,MAAM,cAAc,iBAAiB,EAGxCI,EAAA,EAEb,EAsB+B,QAAS,MAAO,CAC7C,EACA,gBAAiB,CACf,CAAE,UAvBsB,CAACF,EAAYC,EAAeC,IAAkB,CACpED,IAAU,GACHC,EAAA,IAAI,MAAM,8BAA8B,CAAC,EACzCD,IAAUP,EAAK,SACfQ,EAAA,IAAI,MAAM,wBAAwB,CAAC,EAEnCA,EAAA,CAEb,EAesC,QAAS,MAAO,CAAA,CAEtD,EAEA,eAAeC,GAAe,CACvBL,EAAQ,OAEb,MAAMA,EAAQ,MAAM,SAAS,MAAOM,GAAmB,CACrD,GAAKA,EAEL,CAAAR,EAAa,MAAQ,GAEjB,GAAA,CAEF,KAAM,CAAE,gBAAAS,EAAiB,GAAGC,CAAA,EAAiBZ,EAE7B,MAAMJ,EAAU,SAASgB,CAAY,GAGnDC,EAAU,QAAQ,0BAA0B,EAC5Cf,EAAO,KAAK,CAAE,KAAM,MAAA,CAAQ,GAElBe,EAAA,MAAMjB,EAAU,OAAS,wCAAwC,QAEtEkB,EAAO,CACdD,EAAU,MAAM,iDAAiD,EACzD,QAAA,MAAM,sBAAuBC,CAAK,CAAA,QAC1C,CACAZ,EAAa,MAAQ,EAAA,EACvB,CACD,CAAA"}