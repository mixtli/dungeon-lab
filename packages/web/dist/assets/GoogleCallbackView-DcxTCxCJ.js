import{x as y,r as c,h as _,az as x,y as u,A as e,G as k,J as g,H as A,P as b,u as m,ag as R,M as o,L as i,z as l}from"./vue-vendor-CXTDXhET.js";import{u as w}from"./index-cqCp6bjN.js";import{e as h,l as C}from"./ui-vendor-DW-xeH-g.js";const E={class:"google-callback-view"},N={class:"flex justify-center items-center min-h-[400px]"},V={class:"text-center"},B={class:"text-xl font-semibold mb-2"},M={key:1,class:"text-gray-600 dark:text-gray-400"},z={key:2,class:"text-red-600 dark:text-red-400"},D={key:3,class:"text-green-600 dark:text-green-400"},L={key:4,class:"mt-6 p-4 bg-gray-100 dark:bg-gray-700 rounded text-left"},S={key:0},j=y({__name:"GoogleCallbackView",setup(U){const v=x(),r=w(),d=c(!0),s=c(""),a=c({authAttempted:!1,authResult:!1,authError:"",userReceived:!1}),p=c(!1);return _(async()=>{a.value.authAttempted=!0;try{const n=await r.fetchUser();a.value.authResult=n,a.value.userReceived=!!r.user,n?(h.success("Login successful!"),v.push({name:"home"})):(s.value=r.error||"Authentication failed",a.value.authError=s.value,h.error(s.value),v.push({name:"login"}))}catch(n){s.value=n.message||"Authentication failed",a.value.authError=s.value,h.error(s.value),v.push({name:"login"})}finally{d.value=!1}}),(n,t)=>{const f=R("el-icon");return l(),u("div",E,[e("div",N,[e("div",V,[d.value?(l(),k(f,{key:0,class:"animate-spin text-primary-600 mb-4",size:48},{default:A(()=>[b(m(C))]),_:1})):g("",!0),e("h2",B,o(d.value?"Completing Authentication":s.value?"Authentication Failed":"Authentication Complete"),1),d.value?(l(),u("p",M,"Please wait while we complete your login...")):s.value?(l(),u("p",z,o(s.value),1)):(l(),u("p",D,"Redirecting you now...")),p.value?(l(),u("div",L,[t[5]||(t[5]=e("h3",{class:"font-semibold mb-2"},"Debug Information:",-1)),e("div",null,[t[0]||(t[0]=e("strong",null,"Auth Attempted:",-1)),i(" "+o(a.value.authAttempted),1)]),e("div",null,[t[1]||(t[1]=e("strong",null,"Auth Result:",-1)),i(" "+o(a.value.authResult),1)]),e("div",null,[t[2]||(t[2]=e("strong",null,"Auth Error:",-1)),i(" "+o(a.value.authError),1)]),e("div",null,[t[3]||(t[3]=e("strong",null,"User Received:",-1)),i(" "+o(a.value.userReceived),1)]),m(r).user?(l(),u("div",S,[t[4]||(t[4]=e("strong",null,"User:",-1)),i(" "+o(m(r).user.displayName||m(r).user.username),1)])):g("",!0)])):g("",!0)])])])}}});export{j as default};
//# sourceMappingURL=GoogleCallbackView-DcxTCxCJ.js.map
