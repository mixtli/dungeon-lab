import{a as B}from"./index-cqCp6bjN.js";import{x as y,r as f,c as b,y as a,A as e,J as v,M as i,O as w,a6 as k,C as D,z as n,P as j}from"./vue-vendor-CXTDXhET.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ui-vendor-DW-xeH-g.js";const V={class:"file-uploader"},W=["accept","multiple"],E={class:"mb-4"},A=["disabled"],I={key:0,class:"ml-2 text-sm text-gray-500"},P={key:0,class:"mb-4"},N={class:"space-y-1"},H={class:"truncate max-w-md"},L={class:"ml-2 text-xs text-gray-500"},T={class:"mt-3 flex space-x-2"},J=["disabled"],K=["disabled"],O={key:1,class:"mb-4"},q={class:"w-full bg-gray-200 rounded-full h-2.5"},G={class:"text-sm text-center mt-1"},Q={key:2,class:"text-red-600 text-sm mt-2"},R=y({__name:"FileUploader",props:{folder:{},accept:{},multiple:{type:Boolean},maxSize:{}},emits:["upload-success","upload-error"],setup(x,{emit:p}){const d=x,g=p,l=f(null),t=f([]),s=f(!1),m=f(0),u=f(null),F=b(()=>(d.maxSize||10)*1024*1024),$=b(()=>d.accept||"*");function U(o){const c=o.target;if(c.files){u.value=null,t.value=Array.from(c.files);for(const r of t.value)if(r.size>F.value){u.value=`File ${r.name} exceeds the maximum size of ${d.maxSize||10}MB`,t.value=[],l.value&&(l.value.value="");return}}}async function z(){if(t.value.length!==0){s.value=!0,m.value=0,u.value=null;try{const o=[];for(const c of t.value){const r=new FormData;r.append("file",c),d.folder&&r.append("folder",d.folder);const h=await B.post("/api/storage/files",r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:_=>{_.total&&(m.value=Math.round(_.loaded*100/_.total))}});o.push({url:h.data.url,key:h.data.key})}g("upload-success",o),t.value=[],l.value&&(l.value.value="")}catch(o){console.error("Error uploading files:",o),u.value=o instanceof Error?o.message:"An error occurred during upload",g("upload-error",o instanceof Error?o:new Error("Upload failed"))}finally{s.value=!1}}}function S(){l.value&&l.value.click()}function C(){t.value=[],l.value&&(l.value.value=""),u.value=null}return(o,c)=>(n(),a("div",V,[e("input",{ref_key:"fileInput",ref:l,type:"file",accept:$.value,multiple:o.multiple,class:"hidden",onChange:U},null,40,W),e("div",E,[e("button",{type:"button",onClick:S,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",disabled:s.value}," Select File"+i(o.multiple?"s":""),9,A),o.maxSize?(n(),a("span",I," Max size: "+i(o.maxSize)+"MB ",1)):v("",!0)]),t.value.length>0?(n(),a("div",P,[c[0]||(c[0]=e("div",{class:"text-sm font-medium mb-2"},"Selected Files:",-1)),e("ul",N,[(n(!0),a(w,null,k(t.value,(r,h)=>(n(),a("li",{key:h,class:"flex items-center"},[e("span",H,i(r.name),1),e("span",L," ("+i((r.size/1024).toFixed(1))+" KB) ",1)]))),128))]),e("div",T,[e("button",{type:"button",onClick:z,class:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",disabled:s.value}," Upload ",8,J),e("button",{type:"button",onClick:C,class:"px-3 py-1 bg-gray-200 text-gray-800 text-sm rounded hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2",disabled:s.value}," Clear ",8,K)])])):v("",!0),s.value?(n(),a("div",O,[e("div",q,[e("div",{class:"bg-blue-600 h-2.5 rounded-full",style:D({width:`${m.value}%`})},null,4)]),e("div",G,i(m.value)+"% Uploaded ",1)])):v("",!0),u.value?(n(),a("div",Q,i(u.value),1)):v("",!0)]))}}),X=M(R,[["__scopeId","data-v-b8fdcbff"]]),Y={class:"container mx-auto px-4 py-8"},Z={class:"bg-white shadow-md rounded-lg p-6 mb-8"},ee={key:0,class:"bg-white shadow-md rounded-lg p-6"},te={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},se={key:0},oe=["src"],le={key:1,class:"bg-gray-100 h-48 flex items-center justify-center"},ae={key:2,class:"bg-gray-100 h-48 flex items-center justify-center"},ne={class:"p-3 border-t"},re={class:"truncate text-sm font-medium"},ie={class:"flex justify-between items-center mt-2"},de=["href"],ue={class:"text-xs text-gray-500"},ve=y({__name:"FileUploadDemo",setup(x){const p=f([]);function d(l){p.value=[...p.value,...l]}function g(l){console.error("Upload error:",l)}return(l,t)=>(n(),a("div",Y,[t[4]||(t[4]=e("h1",{class:"text-2xl font-bold mb-6"},"File Upload Demo",-1)),e("div",Z,[t[0]||(t[0]=e("h2",{class:"text-xl font-semibold mb-4"},"Upload Files",-1)),j(X,{folder:"demo",accept:"image/*,.pdf",multiple:!0,"max-size":5,onUploadSuccess:d,onUploadError:g})]),p.value.length>0?(n(),a("div",ee,[t[3]||(t[3]=e("h2",{class:"text-xl font-semibold mb-4"},"Uploaded Files",-1)),e("div",te,[(n(!0),a(w,null,k(p.value,(s,m)=>(n(),a("div",{key:m,class:"border rounded-lg overflow-hidden"},[s.url.endsWith(".jpg")||s.url.endsWith(".jpeg")||s.url.endsWith(".png")||s.url.endsWith(".gif")||s.url.endsWith(".webp")?(n(),a("div",se,[e("img",{src:s.url,alt:"Uploaded file",class:"w-full h-48 object-cover"},null,8,oe)])):s.url.endsWith(".pdf")?(n(),a("div",le,t[1]||(t[1]=[e("div",{class:"text-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 mx-auto text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})]),e("span",{class:"block mt-2"},"PDF Document")],-1)]))):(n(),a("div",ae,t[2]||(t[2]=[e("div",{class:"text-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 mx-auto text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),e("span",{class:"block mt-2"},"File")],-1)]))),e("div",ne,[e("div",re,i(s.key.split("/").pop()),1),e("div",ie,[e("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 hover:text-blue-800 text-sm"}," View File ",8,de),e("span",ue,i(new Date().toLocaleDateString()),1)])])]))),128))])])):v("",!0)]))}});export{ve as default};
//# sourceMappingURL=FileUploadDemo-oP-BvBmo.js.map
